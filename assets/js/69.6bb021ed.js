(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{434:function(e,v,_){"use strict";_.r(v);var c=_(25),d=Object(c.a)({},(function(){var e=this,v=e.$createElement,_=e._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[_("h1",{attrs:{id:"npm相关"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#npm相关"}},[e._v("#")]),e._v(" npm相关")]),e._v(" "),_("h2",{attrs:{id:"package-json中版本号"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#package-json中版本号"}},[e._v("#")]),e._v(" package.json中版本号")]),e._v(" "),_("p",[_("code",[e._v("package.json")]),e._v("的版本号，"),_("code",[e._v("~")]),e._v("与"),_("code",[e._v("^")]),e._v("是有区别的。")]),e._v(" "),_("p",[e._v("以"),_("code",[e._v('"lodash": "^4.17.20"')]),e._v("为例：")]),e._v(" "),_("ul",[_("li",[_("code",[e._v("~")]),e._v(": 使用"),_("code",[e._v("install")]),e._v("安装时，会忽略最后一位"),_("code",[e._v("20")]),e._v("，安装"),_("code",[e._v("4.17.X")]),e._v("的最新版本")]),e._v(" "),_("li",[_("code",[e._v("^")]),e._v(": 使用"),_("code",[e._v("install")]),e._v("安装时，会忽略后面2位，安装"),_("code",[e._v("4.X.X")]),e._v("的最新版本")])]),e._v(" "),_("h2",{attrs:{id:"线上npm安装优化"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#线上npm安装优化"}},[e._v("#")]),e._v(" 线上npm安装优化")]),e._v(" "),_("p",[e._v("我们知道，常用的"),_("code",[e._v("package.json")]),e._v("中有3个标签管理版本，分别是："),_("code",[e._v("dependencies")]),e._v("、"),_("code",[e._v("devDependencies")]),e._v("、"),_("code",[e._v("peerDependencies")]),e._v("。作用也很明显：")]),e._v(" "),_("ul",[_("li",[_("code",[e._v("dependencies")]),e._v("： 代码中需要用到的依赖包")]),e._v(" "),_("li",[_("code",[e._v("devDependencies")]),e._v("： 开发环境下需要用到的依赖包，比如常见的"),_("code",[e._v("eslint")]),e._v("、"),_("code",[e._v("babel")]),e._v("、"),_("code",[e._v("webpack")]),e._v("这种工具类的")]),e._v(" "),_("li",[_("code",[e._v("peerDependencies")]),e._v("： 当作为第3方库使用时，比如"),_("code",[e._v("lodash")]),e._v("的库，它如果在这里配置了一个"),_("code",[e._v("xx")]),e._v("的包，在安装时并不会下载"),_("code",[e._v("xx")]),e._v("，而是安装完成后如果没有找到这个"),_("code",[e._v("xx")]),e._v("，会提示你自行安装。")])]),e._v(" "),_("p",[e._v("那么对于线上"),_("code",[e._v("npm")]),e._v("安装（一般是"),_("code",[e._v("CICD")]),e._v("自动化任务构建）时，"),_("code",[e._v("devDependencies")]),e._v("肯定是没有必要的，就不必使用"),_("code",[e._v("npm install")]),e._v("进行安装，有2种方式：")]),e._v(" "),_("ul",[_("li",[_("code",[e._v("npm ci")]),e._v("，它会根据"),_("code",[e._v("package-lock.json")]),e._v("文件，快速安装，应该是会忽略一些"),_("code",[e._v("install")]),e._v("时的逻辑，速度会很快。当然，如果没有这个文件，就会报错了。")]),e._v(" "),_("li",[_("code",[e._v("npm i --production")]),e._v("，它会忽略"),_("code",[e._v("devDependencies")]),e._v("下的安装包。所以，使用它时，必须确保你代码中的依赖都在"),_("code",[e._v("dependencies")]),e._v("中。")])])])}),[],!1,null,null,null);v.default=d.exports}}]);