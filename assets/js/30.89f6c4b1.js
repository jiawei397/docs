(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{396:function(a,t,s){"use strict";s.r(t);var e=s(25),r=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"使用verdaccio搭建私有npm仓库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用verdaccio搭建私有npm仓库"}},[a._v("#")]),a._v(" 使用verdaccio搭建私有npm仓库")]),a._v(" "),s("p",[a._v("公司内部，如果搭建了"),s("a",{attrs:{href:"./gitlab"}},[s("code",[a._v("gitlab")])]),a._v("后，大概率也会有需求搭建一个私有的"),s("code",[a._v("npm")]),a._v("仓库，虽然违背了开源精神，但有时候是无法避免的。")]),a._v(" "),s("p",[a._v("我们可以使用"),s("a",{attrs:{href:"https://verdaccio.org/",target:"_blank",rel:"noopener noreferrer"}},[s("code",[a._v("verdaccio")]),s("OutboundLink")],1),a._v("来做到这一点。")]),a._v(" "),s("p",[a._v("如果是使用"),s("code",[a._v("nodejs")]),a._v("的话，推荐直接这样安装运行")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("npm install --global verdaccio\n")])])]),s("p",[a._v("当然，使用docker安装也很方便。")]),a._v(" "),s("h2",{attrs:{id:"下载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载"}},[a._v("#")]),a._v(" 下载")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("sudo docker pull verdaccio/verdaccio\n")])])]),s("p",[a._v("也可以按标签拉取：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker pull verdaccio/verdaccio:4\n")])])]),s("h2",{attrs:{id:"运行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#运行"}},[a._v("#")]),a._v(" 运行")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("sudo docker run -it --rm --name verdaccio -p 4873:4873 verdaccio/verdaccio\n")])])]),s("h2",{attrs:{id:"使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[a._v("#")]),a._v(" 使用")]),a._v(" "),s("p",[a._v("运行成功后，我们就能用它来注册了。")]),a._v(" "),s("h3",{attrs:{id:"修改镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改镜像"}},[a._v("#")]),a._v(" 修改镜像")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("npm set registry http://localhost:4873/\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("一般推荐使用nrm进行镜像管理")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# 安装nrms\nnpm i -g nrm\n\n# 增加镜像，比如加个别名为abc\nnrm add abc http://localhost:4873/\n\n# 查看所有镜像\nnrm ls\n\n# 切换镜像 \nnrm use abc\n")])])])]),a._v(" "),s("h3",{attrs:{id:"增加用户并登陆"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#增加用户并登陆"}},[a._v("#")]),a._v(" 增加用户并登陆")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("npm adduser --registry http://localhost:4873\nnpm profile set password --registry http://localhost:4873\n")])])]),s("h3",{attrs:{id:"发布你的npm包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#发布你的npm包"}},[a._v("#")]),a._v(" 发布你的npm包")]),a._v(" "),s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[a._v("npm publish "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("registry http:"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("localhost:4873\n")])])]),s("p",[a._v("如果命令行提示成功，你在"),s("code",[a._v("http://localhost:4873")]),a._v("页面就可以看到效果了。")])])}),[],!1,null,null,null);t.default=r.exports}}]);