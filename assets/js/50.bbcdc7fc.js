(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{416:function(s,t,a){"use strict";a.r(t);var n=a(25),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"js中的位运算"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#js中的位运算"}},[s._v("#")]),s._v(" js中的位运算")]),s._v(" "),a("h2",{attrs:{id:"运算符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运算符"}},[s._v("#")]),s._v(" 运算符")]),s._v(" "),a("p",[s._v("几个主流语言中的这几种位运算大体都是一致的：与（"),a("code",[s._v("&")]),s._v("）、或（"),a("code",[s._v("|")]),s._v("）、非（"),a("code",[s._v("~")]),s._v("）、异或（"),a("code",[s._v("^")]),s._v("）、位移（"),a("code",[s._v("<<")]),s._v("与"),a("code",[s._v(">>")]),s._v("）。")]),s._v(" "),a("h3",{attrs:{id:"与运算符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#与运算符"}},[s._v("#")]),s._v(" 与运算符 &")]),s._v(" "),a("p",[s._v("两个操作数中，位都为1，结果才为1，否则结果为0")]),s._v(" "),a("h3",{attrs:{id:"或运算符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#或运算符"}},[s._v("#")]),s._v(" 或运算符 |")]),s._v(" "),a("p",[s._v("两个位只要有一个为1，那么结果就是1，否则就为0")]),s._v(" "),a("h3",{attrs:{id:"非运算符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#非运算符"}},[s._v("#")]),s._v(" 非运算符 ~")]),s._v(" "),a("p",[s._v("如果位为0，结果是1，如果位为1，结果是0")]),s._v(" "),a("h3",{attrs:{id:"异或运算符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#异或运算符"}},[s._v("#")]),s._v(" 异或运算符 ^")]),s._v(" "),a("p",[s._v("两个操作数的位中，相同则结果为0，不同则结果为1。")]),s._v(" "),a("p",[a("strong",[s._v("异或")]),s._v("可以进行整数值交换")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),s._v(" b； 　　\nb "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),s._v(" b； 　　"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//其实相当于 a ^ b ^ a = b，得到原来b的值")]),s._v("\na "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),s._v(" b； 　　"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//相当于 a ^ b ^ b = a, 得到原来a的值")]),s._v("\n")])])]),a("p",[s._v("也可以用在下面这种场景中：")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("汉明距离")]),s._v(" "),a("p",[s._v("两个整数之间的汉明距离指的是这两个数字对应二进制位不同的位置的数目。")]),s._v(" "),a("p",[s._v("给出两个整数 x 和 y，计算它们之间的汉明距离。")]),s._v(" "),a("p",[s._v("注意： 0 ≤ x, y < 231")]),s._v(" "),a("p",[s._v("示例:")]),s._v(" "),a("p",[s._v("输入: x = 1, y = 4")]),s._v(" "),a("p",[s._v("输出: 2")]),s._v(" "),a("p",[s._v("解释")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("1 (0 0 0 1)\n4 (0 1 0 0)\n     ↑   ↑\n")])])]),a("p",[s._v("上面的箭头指出了对应二进制位不同的位置。")]),s._v(" "),a("p",[s._v("而另一个例子：010001 与 100000 之间的汉明距离是 3")])]),s._v(" "),a("p",[s._v("这是使用异或的最佳场景，因为同位相同为0，不同为1，进行位运算后，正好得到的数的二进制中"),a("code",[s._v("1")]),s._v("的数量就是"),a("strong",[s._v("汉明距离")]),s._v("。")]),s._v(" "),a("p",[s._v("以下是解法：")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("func")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" y")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" sum "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),s._v(" y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" res "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" sum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("match")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/1/g")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" res "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("h3",{attrs:{id:"位移"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#位移"}},[s._v("#")]),s._v(" 位移")]),s._v(" "),a("p",[s._v("向左移动是"),a("code",[s._v("<<")]),s._v("，如"),a("code",[s._v("1 << 1")]),s._v("，就是说二进制数字从"),a("code",[s._v("01")]),s._v("变成"),a("code",[s._v("10")]),s._v("，即十进制"),a("code",[s._v("2")]),s._v("；再比如"),a("code",[s._v("1 << 2")]),s._v("，则是变成二进制"),a("code",[s._v("100")]),s._v("，即十进制"),a("code",[s._v("4")]),s._v("。")]),s._v(" "),a("p",[s._v("向右位移是"),a("code",[s._v(">>")]),s._v("，与之刚好相反。")]),s._v(" "),a("h2",{attrs:{id:"权限校验"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#权限校验"}},[s._v("#")]),s._v(" 权限校验")]),s._v(" "),a("p",[s._v("下面是个有趣的权限校验的例子（参考自《"),a("a",{attrs:{href:"https://mp.weixin.qq.com/s/AcEIkXoKSgtJsH_arkMjBQ",target:"_blank",rel:"noopener noreferrer"}},[s._v("了不起的 Vue3-上"),a("OutboundLink")],1),s._v("》）：")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" permissionFlags "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("A")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("B")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("C")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 4")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//初始化用户权限")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" userPermissionFlag "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nuserPermissionFlag "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|=")]),s._v(" permissionFlags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("A")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nuserPermissionFlag "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|=")]),s._v(" permissionFlags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("C")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userPermissionFlag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 5")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 分别对这3个鉴权，没权限就是0")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userPermissionFlag "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" permissionFlags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("A")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userPermissionFlag "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" permissionFlags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("B")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 0")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userPermissionFlag "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" permissionFlags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("C")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 4")]),s._v("\n")])])]),a("p",[s._v("上面代码怎么解释呢？首先权限"),a("code",[s._v("permissionFlags")]),s._v("的3个值都是"),a("code",[s._v("1")]),s._v("进行位运算得来，有个特点，二进制的位上有且只有一个"),a("code",[s._v("1")]),s._v("。")]),s._v(" "),a("p",[s._v("我们上面说了，"),a("strong",[s._v("或运算符")]),s._v("是这样的：")]),s._v(" "),a("blockquote",[a("p",[s._v("两个位只要有一个为1，那么结果就是1，否则就为0")])]),s._v(" "),a("p",[s._v("所以，"),a("code",[s._v("userPermissionFlag")]),s._v("进行"),a("strong",[s._v("或运算")]),s._v("，得到的结果的二进制可以理解为有权限的位数都被设置为"),a("code",[s._v("1")]),s._v("了。如添加了"),a("code",[s._v("A")]),s._v("后，个位数变成"),a("code",[s._v("1")]),s._v("，添加了"),a("code",[s._v("C")]),s._v("后，百位数变成"),a("code",[s._v("1")]),s._v("。")]),s._v(" "),a("p",[s._v("鉴权就是对"),a("strong",[s._v("或运算")]),s._v("取反，用"),a("strong",[s._v("与运算")]),s._v("：")]),s._v(" "),a("blockquote",[a("p",[s._v("两个操作数中，位都为1，结果才为1，否则结果为0")])]),s._v(" "),a("p",[s._v("用授权后的"),a("code",[s._v("userPermissionFlag")]),s._v("与权限"),a("code",[s._v("permissionFlags")]),s._v("相"),a("strong",[s._v("与")]),s._v("，如果每个位数都为"),a("code",[s._v("0")]),s._v("，代表它一个权限都没有，结果也就是"),a("code",[s._v("0")]),s._v("。")]),s._v(" "),a("p",[s._v("这样，就达到了鉴权的目的。是不是显得很高大上？")])])}),[],!1,null,null,null);t.default=e.exports}}]);