---
sidebar: false
---
# 数组排序问题

遇到一个奇葩问题，数组排序在`chrome`浏览器下没有问题，而在`IE`下不生效。查了下资料，原来是写法有误。

原来写法：

``` js
var arr = [300, 20, 10, 1, 2];
arr.sort(function(a, b){
	return a > b;
});
```
期望返回值是`[300, 20, 10, 2, 1]`（chrome下），结果是`[300, 20, 10, 1, 2]`（IE下）

比较函数的返回值应该是数字（正数降序，负数升序，0不动），而我写成了bool，导致排序失败。chrome下可能做过兼容处理。

最蛋疼的是，在我写这篇文章时，新版本chrome恢复了，与IE效果成了一样的，而本地nodejs运行的版本(v10.0.0)仍是旧的。


1. 比较函数如果不传，则默认按照字符编码的顺序升序排列。
2. 如果想按照其他标准进行排序，就需要提供比较函数，该函数要比较两个值，然后返回一个用于说明这两个值的相对顺序的数字。比较函数应该具有两个参数 a 和 b，其返回值如下：

	- 若 a 小于 b，在排序后的数组中 a 应该出现在 b 之前，则返回一个小于 0 的值。
	- 若 a 等于 b，则返回 0。
	- 若 a 大于 b，则返回一个大于 0 的值。


::: tip 经过测试
比较函数的返回结果如果不是数字（Boolean或者NaN或者String或者Object），都不会排序。
:::

总结下：

- `升序排列`，返回值可以简写为：`a-b`
- `降序排序`，返回值可以简写为：`b-a`
